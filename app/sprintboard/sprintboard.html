<div class="action-bar">
    <h3 class="sprint-title">{{ sprint.title }} <span class="dates">From the {{ sprint.startDate }} to the {{ sprint.endDate }}</span></h3>
</div>

<div class="sprintboard">
    <div class="column" ng-repeat="column in sprint.columns">
        <div class="header {{ column.color }}-bg">
            {{ column.stories.length}} {{ column.title }}
        </div>
        
        <div class="dropzone" drop="column" drop-style="over"></div>

        <div class="stories">
            <div ng-repeat="story in column.stories">
                <div class="story" drag="story" drag-style="drag-story">
                    <div ng-hide="story.editing">
                        <a class="edit" ng-click="story.editing = true">edit</a>
                        <p class="ref">{{ story.ref }}</p>
                        <p class="title">{{ story.title }}</p>
                    </div>

                    <form ng-show="story.editing" ng-submit="saveStory(story)">
                        <textarea ng-model="story.title" focus="story.editing"></textarea>
                        <button class="green-bg" type="submit">Save</button> 
                        or
                        <a ng-click="deleteStory(story)">delete</a>
                    </form>
                </div>

                <div class="dropzone" drop="column" drop-style="over" drop-position-after="story"></div>
            </div>
        </div>

        <p class="add" ng-click="addStory(column)">Add a story</p>
    </div>
</div>